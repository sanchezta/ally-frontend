<div class="min-h-screen bg-gradient-to-br from-white to-gray-100 p-6">
  <div *ngIf="weatherData" class="grid grid-cols-1 lg:grid-cols-3 gap-6">
    <!-- País seleccionado -->
    <div class="bg-white shadow-xl rounded-2xl p-4 border-t-4 border-blue-500">
      <h2 class="text-lg font-semibold text-gray-700 mb-2">
        PAÍS SELECCIONADO
      </h2>
      <p class="text-sm text-gray-600">{{ weatherData.location.country }}</p>
      <p class="text-sm text-gray-600">
        Capital: {{ weatherData.location.name }}
      </p>
      <p class="text-sm text-gray-600">
        Región: {{ weatherData.location.region }}
      </p>
      <p class="text-sm text-gray-600">
        Latitud: {{ weatherData.location.lat }} Longitud:
        {{ weatherData.location.lon }}
      </p>
    </div>

    <!-- Clima -->
    <div
      class="bg-white shadow-xl rounded-2xl p-4 border-t-4 border-indigo-500"
    >
      <h2 class="text-lg font-semibold text-gray-700 mb-2">CLIMA</h2>
      <div class="flex items-center space-x-4">
        <img
          [src]="'https:' + weatherData.current.condition.icon"
          alt="icon"
          class="w-12 h-12"
        />
        <div>
          <p class="text-xl font-semibold">
            {{ weatherData.current.temp_c }}°C
          </p>
          <p class="text-sm text-gray-600">
            {{ weatherData.current.condition.text }}
          </p>
        </div>
      </div>
    </div>

    <!-- Países disponibles -->
    <div
      class="bg-white shadow-xl rounded-2xl p-4 border-t-4 border-purple-500"
    >
      <h2 class="text-lg font-semibold text-gray-700 mb-2">
        PAÍSES DISPONIBLES
      </h2>
      <ul class="space-y-2">
        <li
          *ngFor="let country of countries"
          (click)="loadWeather(country.code)"
          class="flex items-center space-x-2 cursor-pointer hover:underline"
        >
          <span class="text-xl">{{ getFlagEmoji(country.code) }}</span>
          <span>{{ country.name }}</span>
        </li>
      </ul>
    </div>

    <!-- Tareas -->
    <div
      class="bg-white shadow-xl rounded-2xl p-4 border-t-4 border-yellow-500"
    >
      <h2 class="text-lg font-semibold text-gray-700 mb-4">Tareas</h2>

      <!-- Input nueva tarea -->
      <div class="flex items-center mb-4 gap-2">
        <input
          [(ngModel)]="newTaskTitle"
          type="text"
          placeholder="Nueva tarea..."
          class="flex-1 px-3 py-1 text-sm border border-gray-300 rounded-lg focus:outline-none focus:ring focus:ring-yellow-300"
        />
        <button
          (click)="createTask()"
          class="text-sm bg-yellow-500 hover:bg-yellow-600 text-white px-3 py-1 rounded-lg"
        >
          Agregar
        </button>
      </div>

      <!-- Lista de tareas -->
      <ul class="space-y-3 max-h-64 overflow-y-auto pr-1">
        <li
          *ngFor="let task of tasks"
          class="flex items-center justify-between border-b border-gray-200 pb-2"
        >
          <div class="flex items-center space-x-2">
            <span
              class="w-3 h-3 rounded-full"
              [ngClass]="task.completed ? 'bg-green-500' : 'bg-red-500'"
            ></span>
            <span
              [ngClass]="{
                'line-through text-gray-400': task.completed,
                'text-gray-800': !task.completed
              }"
              class="text-sm"
            >
              {{ task.title }}
            </span>
          </div>

          <div class="flex items-center gap-2">
            <button
              *ngIf="!task.completed"
              (click)="markAsCompleted(task)"
              class="text-xs text-white bg-blue-500 px-2 py-1 rounded hover:bg-blue-600"
            >
              Completar
            </button>
            <button
              (click)="deleteTask(task)"
              class="text-xs text-white bg-red-500 px-2 py-1 rounded hover:bg-red-600"
            >
              Eliminar
            </button>
          </div>
        </li>
      </ul>
    </div>

    <!-- Zona horaria -->
    <div class="bg-white shadow-xl rounded-2xl p-4 border-t-4 border-green-500">
      <h2 class="text-lg font-semibold text-gray-700 mb-2">Zona horaria</h2>
      <p class="text-sm text-blue-600">{{ weatherData.location.tz_id }}</p>
    </div>

    <!-- Hora actual -->
    <div class="bg-white shadow-xl rounded-2xl p-4 border-t-4 border-cyan-500">
      <h2 class="text-lg font-semibold text-gray-700 mb-2">Hora</h2>
      <p class="text-sm text-gray-600">{{ localTime }}</p>
      <p class="text-sm text-gray-600">{{ weatherData.location.tz_id }}</p>
    </div>
  </div>

  <div *ngIf="!weatherData" class="text-center text-gray-500 mt-10">
    Cargando datos del clima...
  </div>
</div>
